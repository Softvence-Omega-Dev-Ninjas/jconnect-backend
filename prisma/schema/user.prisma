model User {
  id                     String                 @id @default(uuid())
  full_name              String
  email                  String                 @unique
  profilePhoto           String?
  phone                  String?                @unique
  password               String
  pinCode                Int?
  otp                    String?
  googleId               String?                @unique
  emailOtp               Int?
  otpExpiresAt           DateTime?
  isVerified             Boolean                @default(false)
  is_terms_agreed        Boolean                @default(false)
  isLogin                Boolean                @default(false)
  isDeleted              Boolean                @default(false)
  isActive               Boolean                @default(true)
  login_attempts         Int?                   @default(0)
  // OTP sent to phone for phone verification
  phoneOtp               Int?
  phoneOtpExpiresAt      DateTime?
  phoneVerified          Boolean                @default(false)
  last_login_at          DateTime?
  created_at             DateTime               @default(now())
  updated_at             DateTime               @updatedAt
  token_expires_at       DateTime?
  role                   Role                   @default(USER)
  validation_type        ValidationType?        @default(EMAIL)
  auth_provider          AuthProvider?
  stripeAccountId        String?
  sellerIDStripe         String?
  customerIdStripe       String?
  // Relation to Service Model 
  profile                Profile?
  serviceRequests        ServiceRequest[]
  services               Service[]
  devices                Device[]
  LiveChatsCreated       LiveChat[]             @relation("LiveChatCreator")
  chatParticipations     LiveChatParticipant[]
  liveMessages           LiveMessage[]
  liveMessageReads       LiveMessageRead[]
  Payments               Payment[]
  // Custom Service Requests relations
  customRequestsMade     CustomServiceRequest[] @relation("BuyerCustomRequests")
  customRequestsReceived CustomServiceRequest[] @relation("TargetedCustomRequests")
  //  Buyer/Seller relation with BuyService
  buyServicesAsBuyer     BuyService[]           @relation("Buyer")
  buyServicesAsSeller    BuyService[]           @relation("Seller")
  Buyer                  SocialServiceRequest[] @relation("SocialRequestBuyer")
  Artist                 SocialServiceRequest[] @relation("SocialRequestRequester")

  ReviewsGiven    Review[]        @relation("ReviewsGiven")
  ReviewsReceived Review[]        @relation("ReviewsReceived")
  socialServices  SocialService[]

  // Support system relations
  supportChats        SupportChat[]
  supportChatsAsAdmin SupportChat[]        @relation("SupportChatAdmin")
  supportMessages     SupportMessage[]
  // Notification relations
  notifications       Notification[]
  userNotifications   UserNotification[]
  notificationToggles NotificationToggle[]

  @@map("users")
}

model Device {
  id             String   @id @default(uuid())
  userId         String
  user           User     @relation(fields: [userId], references: [id])
  browser        String?
  browserVersion String?
  os             String?
  osVersion      String?
  deviceType     String?
  deviceModel    String?
  ipAddress      String?
  lastUsedAt     DateTime @default(now())
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("devices")
}

enum Role {
  USER
  MODERATOR
  ADMIN
  SUPER_ADMIN
  FINANCE_ADMIN
  SUPPORT_ADMIN
  ANALYST
  MEMBER
  ARTIST
}

enum ValidationType {
  EMAIL
  PHONE
}

enum AuthProvider {
  GOOGLE
  FACEBOOK
}
